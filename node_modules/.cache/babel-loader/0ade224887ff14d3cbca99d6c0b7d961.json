{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Bill Quan\\\\Desktop\\\\fit3171\\\\fit4002\\\\rr1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Bill Quan\\\\Desktop\\\\fit3171\\\\fit4002\\\\rr1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Bill Quan\\\\Desktop\\\\fit3171\\\\fit4002\\\\rr1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Bill Quan\\\\Desktop\\\\fit3171\\\\fit4002\\\\rr1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Bill Quan\\\\Desktop\\\\fit3171\\\\fit4002\\\\rr1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import CourseTile from\"./CourseTile\";function compare(a,b){if(new Date(a.startDate)<new Date(b.startDate)){return-1;}if(new Date(a.startDate)>new Date(b.startDate)){return 1;}if(new Date(a.startTime)>new Date(b.startTime)){return-1;}if(new Date(a.startTime)<new Date(b.startTime)){return 1;}return 0;}var CourseList=/*#__PURE__*/function(_Component){_inherits(CourseList,_Component);var _super=_createSuper(CourseList);function CourseList(props){var _this;_classCallCheck(this,CourseList);_this=_super.call(this,props);_this.state={category:\"\",description:\"\",imgUrl:\"\",courseIds:[],courses:[]};_this.getCourses=_this.getCourses.bind(_assertThisInitialized(_this));return _this;}// Retrieve all the courses in the database, and add all the courses to the state\n_createClass(CourseList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Retrieve an array of courseIds for a given category\naxios// *** The following commented line is needed for dynamic routes ***\n.get(\"http://localhost:5000/categories/find/\".concat(this.props.match.params.category)).then(function(response){_this2.setState({category:response.data[0].category,description:response.data[0].description,imgUrl:response.data[0].imgUrl,courseIds:response.data[0].courses});_this2.getCourses();// This is a proceeding function\n}).catch(function(error){console.log(error);});}},{key:\"getCourses\",value:function getCourses(){var _this3=this;// Retrieve all the courses given the course's '_id'\nthis.state.courseIds.forEach(function(courseId){axios.get(\"http://localhost:5000/courses/\".concat(courseId)).then(function(response){_this3.setState({courses:_this3.state.courses.concat(response.data)});//console.log(response.data);\n});});this.setState({courses:this.state.courses.sort(compare)});}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,this.state.category),/*#__PURE__*/React.createElement(\"img\",{src:this.state.imgUrl,alt:\"\"}),/*#__PURE__*/React.createElement(\"p\",null,this.state.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"row row-cols-1 row-cols-md-2\"},this.state.courses.map(function(course){return/*#__PURE__*/React.createElement(CourseTile,{category:_this4.props.match.params.category,title:course.title,description:course.description,key:course._id,id:course._id,startDate:course.startDate});})));}}]);return CourseList;}(Component);export default CourseList;","map":{"version":3,"sources":["C:/Users/Bill Quan/Desktop/fit3171/fit4002/rr1/src/CoursePage/CourseList.js"],"names":["React","Component","axios","CourseTile","compare","a","b","Date","startDate","startTime","CourseList","props","state","category","description","imgUrl","courseIds","courses","getCourses","bind","get","match","params","then","response","setState","data","catch","error","console","log","forEach","courseId","concat","sort","map","course","title","_id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport CourseTile from \"./CourseTile\";\r\n\r\nfunction compare( a, b ) {\r\n    if ( new Date(a.startDate) < new Date(b.startDate) ){\r\n        return -1;\r\n    }\r\n    if ( new Date(a.startDate) > new Date(b.startDate) ){\r\n        return 1;\r\n    }\r\n    if ( new Date(a.startTime) > new Date(b.startTime) ){\r\n        return -1;\r\n    }\r\n    if ( new Date(a.startTime) < new Date(b.startTime) ){\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\nclass CourseList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      category: \"\",\r\n      description: \"\",\r\n      imgUrl: \"\",\r\n      courseIds: [],\r\n      courses: [],\r\n    };\r\n\r\n    this.getCourses = this.getCourses.bind(this);\r\n  }\r\n\r\n  // Retrieve all the courses in the database, and add all the courses to the state\r\n  componentDidMount() {\r\n    // Retrieve an array of courseIds for a given category\r\n    axios\r\n      // *** The following commented line is needed for dynamic routes ***\r\n      .get(\r\n        `http://localhost:5000/categories/find/${this.props.match.params.category}`\r\n      )\r\n      .then((response) => {\r\n        this.setState({\r\n          category: response.data[0].category,\r\n          description: response.data[0].description,\r\n          imgUrl: response.data[0].imgUrl,\r\n          courseIds: response.data[0].courses,\r\n        });\r\n        this.getCourses(); // This is a proceeding function\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  getCourses() {\r\n    // Retrieve all the courses given the course's '_id'\r\n    this.state.courseIds.forEach((courseId) => {\r\n      axios\r\n        .get(`http://localhost:5000/courses/${courseId}`)\r\n        .then((response) => {\r\n          this.setState({\r\n            courses: this.state.courses.concat(response.data)\r\n          });\r\n          //console.log(response.data);\r\n        });\r\n    });\r\n    this.setState({\r\n          courses: this.state.courses.sort(compare)\r\n    });\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          <h1>{this.state.category}</h1>\r\n          <img src={this.state.imgUrl} alt=\"\" />\r\n          <p>{this.state.description}</p>\r\n        </div>\r\n        <div className=\"row row-cols-1 row-cols-md-2\">\r\n          {this.state.courses.map((course) => {\r\n            return (\r\n              <CourseTile\r\n                category={this.props.match.params.category}\r\n                title={course.title}\r\n                description={course.description}\r\n                key={course._id}\r\n                id={course._id}\r\n                  startDate={course.startDate}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CourseList;\r\n"]},"metadata":{},"sourceType":"module"}